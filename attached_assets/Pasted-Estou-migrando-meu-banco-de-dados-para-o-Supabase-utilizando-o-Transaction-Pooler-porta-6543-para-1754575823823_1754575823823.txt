Estou migrando meu banco de dados para o Supabase, utilizando o Transaction Pooler (porta 6543) para compatibilidade com IPv4 no Replit. Preciso que voc√™ atualize completamente o app para funcionar com esse novo banco.

üß± 1. ATUALIZAR CONEX√ÉO DO DRIZZLE ORM
‚û§ Substituir a conex√£o local pelo Supabase:
Atualize a inst√¢ncia do pg.Pool para usar a vari√°vel DATABASE_URL do .env.

Certifique-se de que todos os lugares que usam o banco (Drizzle) estejam apontando para essa nova inst√¢ncia.

ts
Copiar
Editar
// Exemplo:
import { Pool } from 'pg';
import { drizzle } from 'drizzle-orm/node-postgres';
import 'dotenv/config';

const pool = new Pool({ connectionString: process.env.DATABASE_URL });
export const db = drizzle(pool);
üß™ 2. VARI√ÅVEL DE AMBIENTE NO .ENV
Garanta que o arquivo .env contenha a seguinte vari√°vel:

env
Copiar
Editar
DATABASE_URL=postgresql://postgres.wxyz:[SUA-SENHA]@aws-xxx.supabase.co:6543/postgres
‚ö†Ô∏è N√£o coloque colchetes ‚Äî use a senha real.

üîÅ 3. APLICAR MIGRA√á√ïES NO NOVO BANCO
‚û§ Execute:
bash
Copiar
Editar
npx drizzle-kit push
Isso cria as tabelas no banco do Supabase.

Se der erro, verifique se a conex√£o est√° correta.

üîê 4. AUTENTICA√á√ÉO DE USU√ÅRIOS
O app atual usava autentica√ß√£o local. Desejo que:

‚û§ Adapte a l√≥gica para:
Usar Supabase apenas como banco de dados

Manter login local com email e senha funcionando (via Drizzle + bcrypt)

OU integrar login com Google OAuth (se poss√≠vel) com Supabase Auth

Se for usado Supabase Auth, armazenar nome, email e role manualmente na tabela users ap√≥s o login com Google.

üìÅ 5. SUGEST√ÉO DE ARQUIVOS OBSOLETOS PARA LIMPAR
Se o login via Google substituir a l√≥gica local, sugiro excluir:

Helpers de bcrypt, jsonwebtoken

Middlewares de autentica√ß√£o local, se n√£o forem mais usados

Rotas antigas de login/cadastro (/auth/login, /auth/register), se migrar tudo para Supabase Auth

Pe√ßa confirma√ß√£o antes de excluir.

‚úÖ OBJETIVO FINAL
O banco de dados deve funcionar perfeitamente com Supabase (porta 6543)

O Drizzle deve estar totalmente conectado ao Supabase

Login e cria√ß√£o de usu√°rios devem persistir dados no Supabase

A cria√ß√£o de servi√ßos (title, serviceType) deve funcionar sem erros

Dados devem ser vis√≠veis e gerenci√°veis pelo painel web do Supabase

O .env deve estar configurado corretamente

Se precisar, posso informar a senha do banco para colocar diretamente no .env.
Me avise se for necess√°rio criar os schemas ou se o assistente pode inferir com base nos arquivos existentes.